@inject CsvParsingService Csv
@inherits WizardStepBase
@using Models

<FileUploadComponent T="List<ExamRoom>"
                     PText="Selecteer het .csv bestand met alle lokalen."
                     H3Text="Lokalen lijst"
                     Parser="ParseExamRooms"
                     AssignResult="AssignRooms"
                     GoToNextStep="GoToNextStep" />

@code {
    protected override Task OnInitializedAsync()
    {
        return base.OnInitializedAsync();
    }

    private async Task<List<ExamRoom>> ParseExamRooms(Stream stream)
    {
        return await Csv.ParseExamRooms(stream).ToListAsync();
    }

    private void AssignRooms(List<ExamRoom> examRooms)
    {
        examRooms.Add(new ExamRoom("SB+", int.MaxValue, 1, int.MaxValue, City.Gent, null, ExamRoomNotes.SB, false, true));
        Wiz.WizardModel.Rooms = examRooms;
    }

}
